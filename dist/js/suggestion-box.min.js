!function(t){t.fn.suggestionBox=function(n){function e(n){var e=t(n.target).parent("li");return e.parent().children().index(e)}function i(t){E=y.find("li:eq("+t+") a").attr("href"),y.find("li:eq("+t+")").addClass("selected")}function r(t){y.find("li:eq("+t+")").removeClass("selected")}function o(){E="#",T=-1}function u(){var t=y.find("li").size();T===t-1?(r(T),o()):(r(T),T++,i(T))}function s(){T>0?(r(T),T--,i(T)):-1==T?(r(T),T=y.find("li").size()-1,i(T)):(r(0),o())}function a(){window.location=E}function f(n){t.ajax({url:n,data:k,dataType:"json",success:function(t){m(t),v(),b.ajaxSuccess(t)},error:function(t){b.ajaxError(t)}})}function c(){var t=d(S,"border-bottom-width")+d(S,"border-top-width"),n=d(S,"padding-bottom")+d(S,"padding-top");y.css({position:"absolute",left:S.offset().left+b.leftOffset,top:S.offset().top+(S.height()+t+n+b.topOffset)})}function d(t,n){return parseInt(t.css(n).replace("px",""))}function l(){b.fadeOut?y.fadeOut():y.css("display","none"),o()}function g(){b.fadeIn?y.fadeIn():y.css("display","block")}function h(){var t=p();"auto"==b.menuWidth?y.css({"min-width":t}):"constrain"==b.menuWidth&&y.css({width:t})}function p(){return S.width()+d(S,"border-left")+d(S,"border-right")+d(S,"padding-left")+d(S,"padding-right")-d(y,"border-left")-d(y,"border-right")-d(y,"padding-left")-d(y,"padding-right")}function v(){o(),M=!1;var n=b.filter?x(S.val()):j;if(n&&n.results){var e='<div id="suggestion-header">'+b.heading+'</div> <ul id="suggestion-box-list">';t.each(n.results,function(n,i){if(!i.suggestion||!i.url)return!1;M=!0;var r="";return i.attr&&t.each(i.attr,function(t,n){r+=n.name+'="'+n.value+'" '}),e+='<li><a href="'+i.url+'" '+r+">"+i.suggestion+"</a></li>",n===b.results-1?!1:void 0}),e+="</ul>"}U?M?(y.html(e),h(),g()):b.showNoSuggestionsMessage?(h(),g(),y.html('<div id="no-suggestions">'+b.noSuggestionsMessage+"</div>")):l():l()}function m(n){j=n?n instanceof Object?n:t.parseJSON(n):{}}function w(n){t.ajax({url:n,dataType:"json",success:function(t){m(t)},error:function(t){console.log(t)}})}function x(n){var e;if(filterPattern=b.filterPattern.replace("{INPUT}",n),!n)return{};if(j&&j.results){var i=new RegExp(filterPattern,"i");e=t.grep(j.results,function(t){return i.test(t.suggestion)})}O&&e.sort(O);var r=JSON.stringify({results:e});return t.parseJSON(r)}var S=this,b=t.extend({topOffset:0,leftOffset:0,delay:400,heading:"Suggestions",results:10,fadeIn:!0,fadeOut:!1,menuWidth:"auto",showNoSuggestionsMessage:!1,noSuggestionsMessage:"No Suggestions Found",filter:!1,ajaxError:function(t){console.log(t)},ajaxSuccess:function(t){},paramName:"search",filterPattern:"({INPUT})"},n);t("body").append('<div id="suggestion-box"></div>'),S.attr("autocomplete","off");var y=t("#suggestion-box");c();var j,O,N=13,I=38,D=40,P=27,T=-1,E="#",q=!1,J=null,M=!1,U=!1,k={};return y.on({mousemove:function(t){"A"===t.target.nodeName&&(r(T),T=e(t),i(T),q=!0)},mouseout:function(t){"A"===t.target.nodeName&&(q=!1,r(T),o())}}),S.on({blur:function(){U=!1,q||l()},focus:function(){U=!0,t(this).val()&&v(j)},keyup:function(t){b.url?t.which!==I&&t.which!==D&&t.which!==P&&(J&&clearTimeout(J),k[b.paramName]=S.val(),J=setTimeout(function(){f(b.url)},b.delay)):b.filter&&v()},keydown:function(t){"none"!==y.css("display")&&(t.which==D&&(t.preventDefault(),u()),t.which==I&&(t.preventDefault(),s()),t.which===N&&"#"!==E&&(t.preventDefault(),a()),t.which==P&&(t.preventDefault(),l()))}}),t(window).resize(function(){c()}),{getSuggestions:function(t){return f(t),this},showSuggestions:function(t){return S.focus(),t&&m(t),v(),this},addSuggestions:function(t){return m(t),this},applyFilter:function(t){return b.filter=t,this},loadSuggestions:function(t){return w(t),this},moveUp:function(){return s(),this},moveDown:function(){return u(),this},selectedUrl:function(){return E},selectedSuggestion:function(){return y.find("li:eq("+T+")").text()},position:function(){return T},jsonData:function(){return JSON.stringify(j)},select:function(t){return r(T),T=t,i(t),this},reset:function(){return r(T),o(),this},hide:function(){return l(),this},show:function(){return S.focus(),g(),this},url:function(t){return b.url=t,this},fadeIn:function(t){return b.fadeIn=t,this},fadeOut:function(t){return b.fadeOut=t,this},delay:function(t){return b.delay=t,this},heading:function(t){return b.heading=t,this},results:function(t){return b.results=t,this},ajaxError:function(t){return b.ajaxError=t,this},ajaxSuccess:function(t){return b.ajaxSuccess=t,this},destroy:function(){return S.unbind(this),y.remove(),null},sort:function(t){return O=t,this}}}}(jQuery);
//# sourceMappingURL=maps/suggestion-box.min.js.map
