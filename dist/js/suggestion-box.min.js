!function(t){t.fn.suggestionBox=function(n){function e(){var t=w.find("li").size();S===t-1?(s(S),a()):(s(S),S++,r(S))}function i(){S>0?(s(S),S--,r(S)):-1==S?(s(S),S=w.find("li").size()-1,r(S)):(s(0),a())}function o(){window.location=I}function u(n){t.ajax({url:n,data:q,dataType:"json",success:function(t){x=t,m.ajaxSuccess(t)},error:function(t){m.ajaxError(t)}})}function r(t){I=w.find("li:eq("+t+") a").attr("href"),w.find("li:eq("+t+")").addClass("selected")}function s(t){w.find("li:eq("+t+")").removeClass("selected")}function a(){I="#",S=-1}function f(){var t=c(v,"border-bottom-width")+c(v,"border-top-width"),n=c(v,"padding-bottom")+c(v,"padding-top");w.css({position:"absolute",left:v.offset().left+m.leftOffset,top:v.offset().top+(v.height()+t+n+m.topOffset)})}function c(t,n){return parseInt(t.css(n).replace("px",""))}function d(){m.fadeOut?w.fadeOut():w.css("display","none"),a()}function l(){m.fadeIn?w.fadeIn():w.css("display","block")}function h(){var t=g();"auto"==m.menuWidth?w.css({"min-width":t}):"constrain"==m.menuWidth&&w.css({width:t})}function g(){return v.width()+c(v,"border-left")+c(v,"border-right")+c(v,"padding-left")+c(v,"padding-right")-c(w,"border-left")-c(w,"border-right")-c(w,"padding-left")-c(w,"padding-right")}function p(n){if(a(),x=n,n.results){var e='<div id="suggestion-header">'+m.heading+'</div> <ul id="suggestion-box-list">';t.each(n.results,function(t,n){return n.suggestion&&n.url?(E=!0,e+='<li><a href="'+n.url+'">'+n.suggestion+"</a></li>",t===m.results-1?!1:void 0):(E=!1,d(),!1)}),e+="</ul>",N?E&&(w.html(e),h(),l()):d()}}var v=this,m=t.extend({topOffset:0,leftOffset:0,delay:400,heading:"Suggestions",results:10,fadeIn:!0,fadeOut:!1,menuWidth:"auto",ajaxError:function(t){console.log(t)},ajaxSuccess:function(t){p(t)},paramName:"search"},n);t("body").append('<div id="suggestion-box"></div>'),v.attr("autocomplete","off");var w=t("#suggestion-box");f();var x,b=13,j=38,y=40,O=27,S=-1,I="#",D=!1,k=null,E=!1,N=!1,q={};return w.on({mousemove:function(n){if("A"===n.target.nodeName){t(this).find("li").removeClass("selected");var e=t(n.target).parent("li");S=e.parent().children().index(e),r(S),D=!0}},mouseout:function(t){"A"===t.target.nodeName&&(D=!1,s(S),a())}}),v.on({blur:function(){N=!1,D||d()},focus:function(){N=!0,t(this).val()&&l()},keyup:function(t){t.which!==j&&t.which!==y&&t.which!==O&&(k&&clearTimeout(k),q[m.paramName]=v.val(),k=setTimeout(u(m.url),m.delay))},keydown:function(t){"none"!==w.css("display")&&(t.which==y&&(t.preventDefault(),e()),t.which==j&&(t.preventDefault(),i()),t.which===b&&"#"!==I&&(t.preventDefault(),o()),t.which==O&&(t.preventDefault(),d()))}}),t(window).resize(function(){f()}),{getSuggestions:function(t){return u(t),this},showSuggestions:function(t){return p(t),this},moveUp:function(){return i(),this},moveDown:function(){return e(),this},selectedLink:function(){return I},selectedSuggestion:function(){},position:function(){return S},response:function(){return x},select:function(t){return r(t),this},unselect:function(t){return s(t),this},reset:function(){return s(S),a(),this},hide:function(){return d(),this},show:function(){return l(),this},fadeIn:function(t){return m.fadeIn=t,this},fadeOut:function(t){return m.fadeOut=t,this},delay:function(t){return m.delay=t,this},heading:function(t){return m.heading=t,this},results:function(t){return m.results=t,this},ajaxError:function(t){return m.ajaxError=t,this},ajaxSuccess:function(t){return m.ajaxSuccess=t,this},jsonResults:function(){return jsonResults},destroy:function(){}}}}(jQuery);
//# sourceMappingURL=maps/suggestion-box.min.js.map
