!function(t){t.fn.suggestionBox=function(n){function e(n){var e=t(n.target).parent("li");return e.parent().children().index(e)}function i(t){D=x.find("li:eq("+t+") a").attr("href"),x.find("li:eq("+t+")").addClass("selected")}function o(t){x.find("li:eq("+t+")").removeClass("selected")}function s(){D="#",N=-1}function u(){var t=x.find("li").size();N===t-1?(o(N),s()):(o(N),N++,i(N))}function r(){N>0?(o(N),N--,i(N)):-1==N?(o(N),N=x.find("li").size()-1,i(N)):(o(0),s())}function a(){window.location=D}function f(n){t.ajax({url:n,data:k,dataType:"json",success:function(t){b=t,v(t),w.ajaxSuccess(t)},error:function(t){w.ajaxError(t)}})}function c(){var t=d(m,"border-bottom-width")+d(m,"border-top-width"),n=d(m,"padding-bottom")+d(m,"padding-top");x.css({position:"absolute",left:m.offset().left+w.leftOffset,top:m.offset().top+(m.height()+t+n+w.topOffset)})}function d(t,n){return parseInt(t.css(n).replace("px",""))}function l(){w.fadeOut?x.fadeOut():x.css("display","none"),s()}function h(){w.fadeIn?x.fadeIn():x.css("display","block")}function g(){var t=p();"auto"==w.menuWidth?x.css({"min-width":t}):"constrain"==w.menuWidth&&x.css({width:t})}function p(){return m.width()+d(m,"border-left")+d(m,"border-right")+d(m,"padding-left")+d(m,"padding-right")-d(x,"border-left")-d(x,"border-right")-d(x,"padding-left")-d(x,"padding-right")}function v(n){if(s(),b=n,E=!1,n.results){var e='<div id="suggestion-header">'+w.heading+'</div> <ul id="suggestion-box-list">';t.each(n.results,function(t,n){return n.suggestion&&n.url?(E=!0,e+='<li><a href="'+n.url+'">'+n.suggestion+"</a></li>",t===w.results-1?!1:void 0):!1}),e+="</ul>"}M?E?(x.html(e),g(),h()):w.showNoSuggestionsMessage?(g(),h(),x.html('<div id="no-suggestions">'+w.noSuggestionsMessage+"</div>")):l():l()}var m=this,w=t.extend({topOffset:0,leftOffset:0,delay:400,heading:"Suggestions",results:10,fadeIn:!0,fadeOut:!1,menuWidth:"auto",showNoSuggestionsMessage:!1,noSuggestionsMessage:"No Suggestions Found",ajaxError:function(t){console.log(t)},ajaxSuccess:function(t){},paramName:"search"},n);t("body").append('<div id="suggestion-box"></div>'),m.attr("autocomplete","off");var x=t("#suggestion-box");c();var b,y=13,S=38,j=40,O=27,N=-1,D="#",I=!1,q=null,E=!1,M=!1,k={};return x.on({mousemove:function(t){"A"===t.target.nodeName&&(o(N),N=e(t),i(N),I=!0)},mouseout:function(t){"A"===t.target.nodeName&&(I=!1,o(N),s())}}),m.on({blur:function(){M=!1,I||l()},focus:function(){M=!0,t(this).val()&&v(b)},keyup:function(t){w.url&&t.which!==S&&t.which!==j&&t.which!==O&&(q&&clearTimeout(q),k[w.paramName]=m.val(),q=setTimeout(function(){f(w.url)},w.delay))},keydown:function(t){"none"!==x.css("display")&&(t.which==j&&(t.preventDefault(),u()),t.which==S&&(t.preventDefault(),r()),t.which===y&&"#"!==D&&(t.preventDefault(),a()),t.which==O&&(t.preventDefault(),l()))}}),t(window).resize(function(){c()}),{getSuggestions:function(t){return f(t),this},showSuggestions:function(t){return m.focus(),v(t),this},moveUp:function(){return r(),this},moveDown:function(){return u(),this},selectedUrl:function(){return D},selectedSuggestion:function(){return x.find("li:eq("+N+")").text()},position:function(){return N},jsonData:function(){return b},select:function(t){return o(N),N=t,i(t),this},reset:function(){return o(N),s(),this},hide:function(){return l(),this},show:function(){return m.focus(),h(),this},fadeIn:function(t){return w.fadeIn=t,this},fadeOut:function(t){return w.fadeOut=t,this},delay:function(t){return w.delay=t,this},heading:function(t){return w.heading=t,this},results:function(t){return w.results=t,this},ajaxError:function(t){return w.ajaxError=t,this},ajaxSuccess:function(t){return w.ajaxSuccess=t,this},destroy:function(){m.unbind(this),x.remove()}}}}(jQuery);
//# sourceMappingURL=maps/suggestion-box.min.js.map
