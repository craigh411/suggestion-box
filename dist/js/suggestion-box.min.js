!function(t){function n(n,e){function o(){N(),n.height&&nt.css("max-height",n.height),n.scrollable&&nt.css("overflow","auto"),n.chainable&&(W=e)}function i(t){d(t)&&!Z&&(p(K),K=x(t),h(K)),G=!0,Z=!1}function s(n){d(n)&&!Z?(p(K),m()):t(":focus").attr("id")!==e.attr("id")&&e.focus(),G=!1}function r(t){d(t)&&(t.preventDefault(),g(t))}function u(){Y=!1,G||O()}function a(t){if(t.which!==H&&t.which!==L&&t.which!==F&&t.which!==$){var o=e.val();n.url&&(m(),V&&clearTimeout(V),_[n.paramName]=o,V=setTimeout(function(){S(n.url)},n.delay)),n.filter&&R(),n.hybrid&&(o.length<=0||!X)&&(W.clearSuggestions(),S(A))}}function c(){Y=!0,t(this).val()&&R(tt)}function f(t){t.which==L&&(t.preventDefault(),b(!0)),"none"!==nt.css("display")&&(t.which==H&&(t.preventDefault(),w(!0)),t.which===$&&K>-1&&(t.preventDefault(),nt.find(".selected a").click()),t.which==F&&(t.preventDefault(),O()))}function l(){setTimeout(function(){e.keyup()},200)}function g(t){n.onClick(t)}function d(n){return t(n.target).parents("a").length>0||"A"===n.target.nodeName}function h(t,n){Q=nt.find("li:eq("+t+") a").attr("href"),nt.find("li:eq("+t+")").addClass("selected"),n&&v(t)}function p(t){nt.find("li:eq("+t+")").removeClass("selected")}function m(){Q="#",K=-1,nt.find("li").removeClass("selected")}function v(t){if(Z=!0,t>-1)var n=nt.find("li:eq("+t+")").position().top-nt.find("li:eq(0)").position().top;var e=t>-1?n:0;nt.scrollTop(e)}function b(t){var n=nt.find("li").size();"none"===nt.css("display")?R():K===n-1?(p(K),m()):(p(K),K++,h(K)),t&&v(K)}function w(t){K>0?(p(K),K--,h(K)):-1==K?(p(K),K=nt.find("li").size()-1,h(K)):(p(0),m()),t&&v(K)}function y(){window.location=Q}function S(o){U=e.val(),t.ajax({url:o,data:_,dataType:"json",success:function(t){var o=!0,i=K;tt.suggestions&&t.suggestions&&(o=JSON.stringify(tt.suggestions[K])!==JSON.stringify(t.suggestions[K])),B(t),R(),i>-1&&e.val()===U&&!o&&(K=i,h(K)),n.hybrid&&(A=n.url),n.ajaxSuccess(t)},error:function(t){n.ajaxError(t)}})}function x(n){var e=t(n.target).parents("li");return e.parent().children().index(e)}function N(){var t=j(e,"border-bottom-width")+j(e,"border-top-width"),o=j(e,"padding-bottom")+j(e,"padding-top");nt.css({position:"absolute",left:e.offset().left+n.leftOffset,top:e.offset().top+(e.height()+t+o+n.topOffset)})}function j(t,n){return parseInt(t.css(n).replace("px",""))}function O(){nt.scrollTop(0),n.fadeOut?nt.fadeOut():nt.css("display","none"),m(),n.adjustBorderRadius&&(e.css("border-bottom-left-radius",E.bottomLeft),e.css("border-bottom-right-radius",E.bottomRight)),n.onHide()}function k(){n.fadeIn?nt.fadeIn():nt.css("display","block"),n.adjustBorderRadius&&(e.css("border-bottom-left-radius",0),e.css("border-bottom-right-radius",0)),n.onShow()}function D(){var t=T()+n.widthAdjustment;"auto"==n.menuWidth?nt.css({"min-width":t}):"constrain"==n.menuWidth&&nt.css({width:t})}function T(){return e.width()+j(e,"border-left-width")+j(e,"border-right-width")+j(e,"padding-left")+j(e,"padding-right")}function I(n,e){return t.each(n.attr,function(t,n){for(var o=Object.keys(n),i=0;i<o.length;i++)e+=o[i]+'="'+n[o[i]]+'" '}),e}function M(t,e){for(var o=0;o<n.customData.length;o++){var i=t[n.customData[o]];i&&(e+=t[n.customData[o]])}return e}function J(o){var i=n.filterPattern.replace("{INPUT}",e.val()),s='<div class="suggestion-header">'+n.heading+'</div> <ul class="suggestion-box-list">';return t.each(o.suggestions,function(t,e){if(!e.suggestion||!e.url)return!1;X=!0;var o="";return e.attr&&(o=I(e,o)),s+='<li><a href="'+e.url+'" '+o+">",e.image&&(s+='<img src="'+e.image+'" />'),s+=n.highlightMatch?e.suggestion.replace(new RegExp(i,"gi"),"<b>$&</b>"):e.suggestion,n.customData.length>0&&(s=M(e,s)),s+="</a></li>",t===n.results-1?!1:void 0}),s+="</ul>"}function q(){nt.html('<div class="no-suggestions">'+n.noSuggestionsMessage+"</div>")}function R(t){m(),X=!1;var o=n.filter?C(e.val()):tt;if(o&&o.suggestions)var i=J(o);Y||t?X&&(e.val().length>0||t)?(nt.html(i),D(),k()):t?(n.showNoSuggestionsMessage&&q(),D(),k()):n.showNoSuggestionsMessage&&e.val().length>0?(D(),k(),q()):O():O()}function B(e){tt=e?e instanceof Object?e:t.parseJSON(e):{},n.sort&&tt.suggestions&&tt.suggestions.sort(n.sort)}function P(n){t.ajax({url:n,dataType:"json",success:function(t){B(t)},error:function(t){console.log(t)}})}function C(e){var o;e=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var i=n.filterPattern.replace("{INPUT}",e);if(!e)return tt;if(tt&&tt.suggestions){var s=new RegExp(i,"i");o=t.grep(tt.suggestions,function(t){return s.test(t.suggestion)})}n.sort&&o&&o.sort(n.sort);var r=JSON.stringify({suggestions:o});return t.parseJSON(r)}n=t.extend({topOffset:0,leftOffset:0,widthAdjustment:0,delay:400,heading:"Suggestions",results:10,fadeIn:!0,fadeOut:!1,menuWidth:"auto",showNoSuggestionsMessage:!1,noSuggestionsMessage:"No Suggestions Found",filter:!0,filterPattern:"({INPUT})",highlightMatch:!1,adjustBorderRadius:!0,ajaxError:function(t){console.log(t)},ajaxSuccess:function(t){},onClick:function(){y(),O(),e.val("")},onShow:function(){},onHide:function(){},paramName:"search",customData:[],scrollable:!1,hybrid:!1,chainable:!1},n);var U,A,E,z,W=this,$=13,H=38,L=40,F=27,K=-1,Q="#",G=!1,V=null,X=!1,Y=!1,Z=!1,_={},tt={},nt=null;return function(){z="suggestion-box-"+Math.floor(1e7*Math.random()),nt=t('<div id="'+z+'" class="suggestion-box"></div>').appendTo("body"),E={bottomLeft:e.css("border-bottom-left-radius"),bottomRight:e.css("border-bottom-right-radius")},A=n.url,e.attr("autocomplete","off"),e.on("blur",u),e.on("keyup",a),e.on("focus",c),e.on("keydown",f),e.on("paste",l),nt.on("mousemove",i),nt.on("mouseout",s),nt.on("click",r),t(window).resize(function(){N()}),o()}(),W.getSuggestions=function(t){return S(t),W},W.addSuggestions=function(t){return B(t),W},W.loadSuggestions=function(t){return P(t),W},W.getJson=function(){return JSON.stringify(tt)},W.moveUp=function(){return w(),W},W.moveDown=function(){return b(),W},W.selectedUrl=function(){return Q},W.selectedSuggestion=function(){return nt.find("li:eq("+K+")").text()},W.selectedImage=function(){return nt.find("li:eq("+K+")").find("img").attr("src")},W.position=function(){return K},W.select=function(t){return p(K),K=t,h(t,n.scrollable),W},W.resetSelection=function(){return p(K),m(),W},W.show=function(t){return t=t?t:!1,R(t),W},W.hide=function(){return O(),W},W.getId=function(t){return t?"#"+z:z},W.reservedKey=function(t){var n=t.which;return n===$||n===F||n===H||n===L},W.el=function(){return nt},W.destroy=function(){return nt.unbind(),nt.remove(),e.off("blur",u),e.off("keyup",a),e.off("focus",c),e.off("keydown",f),e.off("paste",l),null},W.set=function(t,e){return n[t]=e,o(),W},W.clearSuggestions=function(){return B(JSON.stringify({})),W},W}t.fn.suggestionBox=function(e){var o=t(this).get()[0],i=t.makeArray(arguments),s=t.data(o,"suggestionBox");return s?s.set(i[0],i[1]):(s=new n(e,this),t.data(o,"suggestionBox",s)),s}}(jQuery);
//# sourceMappingURL=maps/suggestion-box.min.js.map
