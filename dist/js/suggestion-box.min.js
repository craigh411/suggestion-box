!function(t){function n(n,e){function o(){p(),B.height&&Q.css("max-height",B.height),B.scrollable&&Q.css("overflow","auto")}function i(t){B.onClick(t)}function s(n){return t(n.target).parents("a").length>0||"A"===n.target.nodeName}function r(t,n){z=Q.find("li:eq("+t+") a").attr("href"),Q.find("li:eq("+t+")").addClass("selected"),n&&c(t)}function u(t){Q.find("li:eq("+t+")").removeClass("selected")}function a(){z="#",U=-1,Q.find("li").removeClass("selected")}function c(t){if($=!0,t>-1)var n=Q.find("li:eq("+t+")").position().top-Q.find("li:eq(0)").position().top;var e=t>-1?n:0;Q.scrollTop(e)}function f(t){var n=Q.find("li").size();U===n-1?(u(U),a()):(u(U),U++,r(U)),t&&c(U)}function l(t){U>0?(u(U),U--,r(U)):-1==U?(u(U),U=Q.find("li").size()-1,r(U)):(u(0),a()),t&&c(U)}function d(){window.location=z}function g(n){I=q.val(),t.ajax({url:n,data:F,dataType:"json",success:function(t){var n=!0,e=U;K.results&&t.results&&(n=JSON.stringify(K.results[U])!==JSON.stringify(t.results[U])),D(t),O(),e>-1&&q.val()===I&&!n&&(U=e,r(U)),B.ajaxSuccess(t)},error:function(t){B.ajaxError(t)}})}function h(n){var e=t(n.target).parents("li");return e.parent().children().index(e)}function p(){var t=v(q,"border-bottom-width")+v(q,"border-top-width"),n=v(q,"padding-bottom")+v(q,"padding-top");Q.css({position:"absolute",left:q.offset().left+B.leftOffset,top:q.offset().top+(q.height()+t+n+B.topOffset)})}function v(t,n){return parseInt(t.css(n).replace("px",""))}function m(){Q.scrollTop(0),B.fadeOut?Q.fadeOut():Q.css("display","none"),a(),B.adjustBorderRadius&&(q.css("border-bottom-left-radius",J.bottomLeft),q.css("border-bottom-right-radius",J.bottomRight)),B.onHide()}function b(){B.fadeIn?Q.fadeIn():Q.css("display","block"),B.adjustBorderRadius&&(q.css("border-bottom-left-radius",0),q.css("border-bottom-right-radius",0)),B.onShow()}function w(){var t=S()+B.widthAdjustment;"auto"==B.menuWidth?Q.css({"min-width":t}):"constrain"==B.menuWidth&&Q.css({width:t})}function S(){return q.width()+v(q,"border-left-width")+v(q,"border-right-width")+v(q,"padding-left")+v(q,"padding-right")}function y(n,e){return t.each(n.attr,function(t,n){for(var o=Object.keys(n),i=0;i<o.length;i++)e+=o[i]+'="'+n[o[i]]+'" '}),e}function x(t,n){for(var e=0;e<B.customData.length;e++){var o=t[B.customData[e]];o&&(n+=t[B.customData[e]])}return n}function j(n){var e='<div class="suggestion-header">'+B.heading+'</div> <ul class="suggestion-box-list">';return t.each(n.results,function(t,n){if(!n.suggestion||!n.url)return!1;H=!0;var o="";return n.attr&&(o=y(n,o)),e+='<li><a href="'+n.url+'" '+o+">"+n.suggestion,B.customData.length>0&&(e=x(n,e)),e+="</a></li>",t===B.results-1?!1:void 0}),e+="</ul>"}function N(){Q.html('<div class="no-suggestions">'+B.noSuggestionsMessage+"</div>")}function O(t){a(),H=!1;var n=B.filter?T(q.val()):K;if(n&&n.results)var e=j(n);L||t?H?(Q.html(e),w(),b()):t?(B.showNoSuggestionsMessage&&N(),w(),b()):B.showNoSuggestionsMessage&&q.val().length>0?(w(),b(),N()):m():m()}function D(n){K=n?n instanceof Object?n:t.parseJSON(n):{},B.sort&&K.results&&K.results.sort(B.sort)}function k(n){t.ajax({url:n,dataType:"json",success:function(t){D(t)},error:function(t){console.log(t)}})}function T(n){var e;if(n=n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),filterPattern=B.filterPattern.replace("{INPUT}",n),!n)return{};if(K&&K.results){var o=new RegExp(filterPattern,"i");e=t.grep(K.results,function(t){return o.test(t.suggestion)})}B.sort&&e.sort(B.sort);var i=JSON.stringify({results:e});return t.parseJSON(i)}var I,J,M,q=e,B=t.extend({topOffset:0,leftOffset:0,widthAdjustment:0,delay:400,heading:"Suggestions",results:10,fadeIn:!0,fadeOut:!1,menuWidth:"auto",showNoSuggestionsMessage:!1,noSuggestionsMessage:"No Suggestions Found",filter:!1,filterPattern:"({INPUT})",adjustBorderRadius:!0,ajaxError:function(t){console.log(t)},ajaxSuccess:function(t){},onClick:function(){d(),m(),q.val("")},onShow:function(){},onHide:function(){},paramName:"search",customData:[],scrollable:!1},n),C=13,P=38,R=40,A=27,U=-1,z="#",E=!1,W=null,H=!1,L=!1,$=!1,F={},K={},Q=null;return function(){M="suggestion-box-"+Math.floor(1e7*Math.random()),t("body").append('<div id="'+M+'" class="suggestion-box"></div>'),J={bottomLeft:q.css("border-bottom-left-radius"),bottomRight:q.css("border-bottom-right-radius")},Q=t("#"+M),q.attr("autocomplete","off"),o()}(),Q.on({mousemove:function(t){s(t)&&!$&&(u(U),U=h(t),r(U)),E=!0,$=!1},mouseout:function(n){s(n)&&!$?(u(U),a()):t(":focus").attr("id")!==q.attr("id")&&q.focus(),E=!1},click:function(t){s(t)&&(t.preventDefault(),i(t))}}),q.on({blur:function(){L=!1,E||m()},focus:function(){L=!0,t(this).val()&&O(K)},keyup:function(t){t.which!==P&&t.which!==R&&t.which!==A&&t.which!==C&&(B.url&&(a(),W&&clearTimeout(W),F[B.paramName]=q.val(),W=setTimeout(function(){g(B.url)},B.delay)),B.filter&&O())},keydown:function(t){"none"!==Q.css("display")&&(t.which==R&&(t.preventDefault(),f(!0)),t.which==P&&(t.preventDefault(),l(!0)),t.which===C&&U>-1&&(t.preventDefault(),Q.find(".selected a").click()),t.which==A&&(t.preventDefault(),m()))},paste:function(){setTimeout(function(){q.keyup()},200)}}),t(window).resize(function(){p()}),{getSuggestions:function(t){return g(t),this},addSuggestions:function(t){return D(t),this},loadSuggestions:function(t){return k(t),this},getJson:function(){return JSON.stringify(K)},moveUp:function(){return l(),this},moveDown:function(){return f(),this},selectedUrl:function(){return z},selectedSuggestion:function(){return Q.find("li:eq("+U+")").text()},position:function(){return U},select:function(t){return u(U),U=t,r(t,B.scrollable),this},reset:function(){return u(U),a(),this},show:function(t){return t=t?t:!1,O(t),this},hide:function(){return m(),this},getId:function(t){return t?"#"+M:M},reservedKey:function(t){var n=t.which;return n===C||n===A||n===P||n===R},getContext:function(){return q},destroy:function(){return q.unbind(this),Q.remove(),null},set:function(t,n){B[t]=n,o()}}}t.fn.suggestionBox=function(e){var o=t.makeArray(arguments),i=t.data(this,"suggestionBox");return i?i.set(o[0],o[1]):(i=new n(e,this),t.data(this,"suggestionBox",i)),i}}(jQuery);
//# sourceMappingURL=maps/suggestion-box.min.js.map
