!function(t){function e(e,n){function o(){p(),R.height&&Q.css("max-height",R.height),R.scrollable&&Q.css("overflow","auto")}function i(t){R.onClick(t)}function s(e){return t(e.target).parents("a").length>0||"A"===e.target.nodeName}function r(t,e){A=Q.find("li:eq("+t+") a").attr("href"),Q.find("li:eq("+t+")").addClass("selected"),e&&c(t)}function u(t){Q.find("li:eq("+t+")").removeClass("selected")}function a(){A="#",U=-1,Q.find("li").removeClass("selected")}function c(t){if(L=!0,t>-1)var e=Q.find("li:eq("+t+")").position().top-Q.find("li:eq(0)").position().top;var n=t>-1?e:0;Q.scrollTop(n)}function f(t){var e=Q.find("li").size();"none"===Q.css("display")?O():U===e-1?(u(U),a()):(u(U),U++,r(U)),t&&c(U)}function l(t){U>0?(u(U),U--,r(U)):-1==U?(u(U),U=Q.find("li").size()-1,r(U)):(u(0),a()),t&&c(U)}function d(){window.location=A}function g(e){M=P.val(),t.ajax({url:e,data:F,dataType:"json",success:function(t){var e=!0,n=U;K.results&&t.results&&(e=JSON.stringify(K.results[U])!==JSON.stringify(t.results[U])),D(t),O(),n>-1&&P.val()===M&&!e&&(U=n,r(U)),R.ajaxSuccess(t)},error:function(t){R.ajaxError(t)}})}function h(e){var n=t(e.target).parents("li");return n.parent().children().index(n)}function p(){var t=m(P,"border-bottom-width")+m(P,"border-top-width"),e=m(P,"padding-bottom")+m(P,"padding-top");Q.css({position:"absolute",left:P.offset().left+R.leftOffset,top:P.offset().top+(P.height()+t+e+R.topOffset)})}function m(t,e){return parseInt(t.css(e).replace("px",""))}function v(){Q.scrollTop(0),R.fadeOut?Q.fadeOut():Q.css("display","none"),a(),R.adjustBorderRadius&&(P.css("border-bottom-left-radius",I.bottomLeft),P.css("border-bottom-right-radius",I.bottomRight)),R.onHide()}function b(){R.fadeIn?Q.fadeIn():Q.css("display","block"),R.adjustBorderRadius&&(P.css("border-bottom-left-radius",0),P.css("border-bottom-right-radius",0)),R.onShow()}function w(){var t=S()+R.widthAdjustment;"auto"==R.menuWidth?Q.css({"min-width":t}):"constrain"==R.menuWidth&&Q.css({width:t})}function S(){return P.width()+m(P,"border-left-width")+m(P,"border-right-width")+m(P,"padding-left")+m(P,"padding-right")}function y(e,n){return t.each(e.attr,function(t,e){for(var o=Object.keys(e),i=0;i<o.length;i++)n+=o[i]+'="'+e[o[i]]+'" '}),n}function x(t,e){for(var n=0;n<R.customData.length;n++){var o=t[R.customData[n]];o&&(e+=t[R.customData[n]])}return e}function N(e){var n=R.filterPattern.replace("{INPUT}",P.val()),o='<div class="suggestion-header">'+R.heading+'</div> <ul class="suggestion-box-list">';return t.each(e.results,function(t,e){if(!e.suggestion||!e.url)return!1;$=!0;var i="";return e.attr&&(i=y(e,i)),o+='<li><a href="'+e.url+'" '+i+">",e.image&&(o+='<img src="'+e.image+'" />'),o+=R.highlightMatch?e.suggestion.replace(new RegExp(n,"gi"),"<b>$&</b>"):e.suggestion,R.customData.length>0&&(o=x(e,o)),o+="</a></li>",t===R.results-1?!1:void 0}),o+="</ul>"}function j(){Q.html('<div class="no-suggestions">'+R.noSuggestionsMessage+"</div>")}function O(t){a(),$=!1;var e=R.filter?T(P.val()):K;if(e&&e.results)var n=N(e);H||t?$&&(P.val().length>0||t)?(Q.html(n),w(),b()):t?(R.showNoSuggestionsMessage&&j(),w(),b()):R.showNoSuggestionsMessage&&P.val().length>0?(w(),b(),j()):v():v()}function D(e){K=e?e instanceof Object?e:t.parseJSON(e):{},R.sort&&K.results&&K.results.sort(R.sort)}function k(e){t.ajax({url:e,dataType:"json",success:function(t){D(t)},error:function(t){console.log(t)}})}function T(e){var n;if(e=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),filterPattern=R.filterPattern.replace("{INPUT}",e),!e)return K;if(K&&K.results){var o=new RegExp(filterPattern,"i");n=t.grep(K.results,function(t){return o.test(t.suggestion)})}R.sort&&n.sort(R.sort);var i=JSON.stringify({results:n});return t.parseJSON(i)}var M,I,J,P=n,R=t.extend({topOffset:0,leftOffset:0,widthAdjustment:0,delay:400,heading:"Suggestions",results:10,fadeIn:!0,fadeOut:!1,menuWidth:"auto",showNoSuggestionsMessage:!1,noSuggestionsMessage:"No Suggestions Found",filter:!0,filterPattern:"({INPUT})",highlightMatch:!1,adjustBorderRadius:!0,ajaxError:function(t){console.log(t)},ajaxSuccess:function(t){},onClick:function(){d(),v(),P.val("")},onShow:function(){},onHide:function(){},paramName:"search",customData:[],scrollable:!1},e),q=13,B=38,C=40,E=27,U=-1,A="#",z=!1,W=null,$=!1,H=!1,L=!1,F={},K={},Q=null;return function(){J="suggestion-box-"+Math.floor(1e7*Math.random()),t("body").append('<div id="'+J+'" class="suggestion-box"></div>'),I={bottomLeft:P.css("border-bottom-left-radius"),bottomRight:P.css("border-bottom-right-radius")},Q=t("#"+J),P.attr("autocomplete","off"),o()}(),Q.on({mousemove:function(t){s(t)&&!L&&(u(U),U=h(t),r(U)),z=!0,L=!1},mouseout:function(e){s(e)&&!L?(u(U),a()):t(":focus").attr("id")!==P.attr("id")&&P.focus(),z=!1},click:function(t){s(t)&&(t.preventDefault(),i(t))}}),P.on({blur:function(){H=!1,z||v()},focus:function(){H=!0,t(this).val()&&O(K)},keyup:function(t){t.which!==B&&t.which!==C&&t.which!==E&&t.which!==q&&(R.url&&(a(),W&&clearTimeout(W),F[R.paramName]=P.val(),W=setTimeout(function(){g(R.url)},R.delay)),R.filter&&O())},keydown:function(t){t.which==C&&(t.preventDefault(),f(!0)),"none"!==Q.css("display")&&(t.which==B&&(t.preventDefault(),l(!0)),t.which===q&&U>-1&&(t.preventDefault(),Q.find(".selected a").click()),t.which==E&&(t.preventDefault(),v()))},paste:function(){setTimeout(function(){P.keyup()},200)}}),t(window).resize(function(){p()}),{getSuggestions:function(t){return g(t),this},addSuggestions:function(t){return D(t),this},loadSuggestions:function(t){return k(t),this},getJson:function(){return JSON.stringify(K)},moveUp:function(){return l(),this},moveDown:function(){return f(),this},selectedUrl:function(){return A},selectedSuggestion:function(){return Q.find("li:eq("+U+")").text()},position:function(){return U},select:function(t){return u(U),U=t,r(t,R.scrollable),this},reset:function(){return u(U),a(),this},show:function(t){return t=t?t:!1,O(t),this},hide:function(){return v(),this},getId:function(t){return t?"#"+J:J},reservedKey:function(t){var e=t.which;return e===q||e===E||e===B||e===C},getContext:function(){return P},getDomElement:function(){return t(P).get()[0]},destroy:function(){return P.unbind(this),Q.remove(),null},set:function(t,e){R[t]=e,o()},clearSuggestions:function(){D(JSON.stringify({}))}}}t.fn.suggestionBox=function(n){var o=t(this).get()[0],i=t.makeArray(arguments),s=t.data(o,"suggestionBox");return s?s.set(i[0],i[1]):(s=new e(n,this),t.data(o,"suggestionBox",s)),s}}(jQuery);
//# sourceMappingURL=maps/suggestion-box.min.js.map
