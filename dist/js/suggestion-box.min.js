!function(e){e.fn.suggestionBox=function(t){function i(){var e=n(o,"border-bottom")+n(o,"border-top"),t=n(o,"padding-bottom")+n(o,"padding-top");a.css({position:"absolute",left:o.offset().left+s.leftOffset,top:o.offset().top+(o.height()+e+t+s.topOffset)})}function n(e,t){return topBorders=parseInt(e.css(t).replace("px",""))}var o=this,s=e.extend({topOffset:0,leftOffset:0,delay:400,heading:"Suggestions",results:10,fadeIn:!0,fadeOut:!0,menuWidth:"auto",ajaxError:function(e){console.log(e)},paramName:"search"},t);if(!s.url)throw"url of suggestion json required";e("body").append('<div id="suggestion-box"></div>'),o.attr("autocomplete","off");var a=e("#suggestion-box");i();const r=13,d=38,f=40,u=27;var l=-1,c="#",h=!1,g=null,p=!1,m={};a.on({mousemove:function(t){if("A"===t.target.nodeName){e(this).find("li").removeClass("selected");var i=e(t.target).parent("li");l=i.parent().children().index(i),v(l),h=!0}},mouseout:function(e){"A"===e.target.nodeName&&(h=!1,b(l),w())}}),o.on({blur:function(){h||(s.fadeOut?a.fadeOut():a.css("display","none"))},focus:function(){e(this).val()&&(s.fadeIn?a.fadeIn():a.css("display","block"))},keyup:function(t){t.which!==d&&t.which!==f&&t.which!==u&&(g&&clearTimeout(g),m[s.paramName]=o.val(),g=setTimeout(function(){e.ajax({url:s.url,data:m,dataType:"json",success:function(t){var i='<div id="suggestion-header">'+s.heading+'</div> <ul id="suggestion-box-list">';if(e.each(t.results,function(e,t){return t.suggestion?(p=!0,i+='<li><a href="'+t.url+'">'+t.suggestion+"</a></li>"):(p=!1,a.css("display","none")),e===s.results-1?!1:void 0}),i+="</ul>","search"==document.activeElement.id&&p){a.html(i);var r=o.width()+n(o,"border-left")+n(o,"border-right")+n(o,"padding-left")+n(o,"padding-right")-n(a,"border-left")-n(a,"border-right")-n(a,"padding-left")-n(a,"padding-right");"auto"==s.menuWidth?a.css({"min-width":r}):"constrain"==s.menuWidth&&a.css({width:r}),s.fadeIn?a.fadeIn():a.css("display","block")}},error:function(e){s.ajaxError(e)}})},s.delay))},keydown:function(e){if("none"!==a.css("display")){if(e.which==f){e.preventDefault();var t=a.find("li").size();l===t-1?(b(l),w()):(b(l),l++,v(l))}e.which==d&&(e.preventDefault(),l>0?(b(l),l--,v(l)):-1==l?(b(l),l=a.find("li").size()-1,v(l)):(b(0),w())),e.which===r&&"#"!==c&&(e.preventDefault(),window.location=c),e.which==u&&(a.css("display","none"),w())}}}),e(window).resize(function(){i()});var v=function(e){c=a.find("li:eq("+e+") a").attr("href"),a.find("li:eq("+e+")").addClass("selected")},b=function(e){a.find("li:eq("+e+")").removeClass("selected")},w=function(){c="#",l=-1};return this}}(jQuery);
//# sourceMappingURL=maps/suggestion-box.min.js.map
