!function(t){function n(n,e){function o(){y(),U.height&&Z.css("max-height",U.height),U.scrollable&&Z.css("overflow","auto")}function i(){G=!1,F||x()}function s(t){if(t.which!==z&&t.which!==W&&t.which!==$&&t.which!==A){var n=e.val();U.url&&(d(),K&&clearTimeout(K),X[U.paramName]=n,K=setTimeout(function(){b(U.url)},U.delay)),U.filter&&M(),U.hybrid&&(n.length<=0||!Q)&&b(B)}}function r(){G=!0,t(this).val()&&M(Y)}function u(t){t.which==W&&(t.preventDefault(),p(!0)),"none"!==Z.css("display")&&(t.which==z&&(t.preventDefault(),m(!0)),t.which===A&&H>-1&&(t.preventDefault(),Z.find(".selected a").click()),t.which==$&&(t.preventDefault(),x()))}function a(){setTimeout(function(){e.keyup()},200)}function c(t){U.onClick(t)}function f(n){return t(n.target).parents("a").length>0||"A"===n.target.nodeName}function l(t,n){L=Z.find("li:eq("+t+") a").attr("href"),Z.find("li:eq("+t+")").addClass("selected"),n&&h(t)}function g(t){Z.find("li:eq("+t+")").removeClass("selected")}function d(){L="#",H=-1,Z.find("li").removeClass("selected")}function h(t){if(V=!0,t>-1)var n=Z.find("li:eq("+t+")").position().top-Z.find("li:eq(0)").position().top;var e=t>-1?n:0;Z.scrollTop(e)}function p(t){var n=Z.find("li").size();"none"===Z.css("display")?M():H===n-1?(g(H),d()):(g(H),H++,l(H)),t&&h(H)}function m(t){H>0?(g(H),H--,l(H)):-1==H?(g(H),H=Z.find("li").size()-1,l(H)):(g(0),d()),t&&h(H)}function v(){window.location=L}function b(n){R=e.val(),t.ajax({url:n,data:X,dataType:"json",success:function(t){var n=!0,o=H;Y.suggestions&&t.suggestions&&(n=JSON.stringify(Y.suggestions[H])!==JSON.stringify(t.suggestions[H])),J(t),M(),o>-1&&e.val()===R&&!n&&(H=o,l(H)),U.hybrid&&(B=U.url),U.ajaxSuccess(t)},error:function(t){U.ajaxError(t)}})}function w(n){var e=t(n.target).parents("li");return e.parent().children().index(e)}function y(){var t=S(e,"border-bottom-width")+S(e,"border-top-width"),n=S(e,"padding-bottom")+S(e,"padding-top");Z.css({position:"absolute",left:e.offset().left+U.leftOffset,top:e.offset().top+(e.height()+t+n+U.topOffset)})}function S(t,n){return parseInt(t.css(n).replace("px",""))}function x(){Z.scrollTop(0),U.fadeOut?Z.fadeOut():Z.css("display","none"),d(),U.adjustBorderRadius&&(e.css("border-bottom-left-radius",C.bottomLeft),e.css("border-bottom-right-radius",C.bottomRight)),U.onHide()}function N(){U.fadeIn?Z.fadeIn():Z.css("display","block"),U.adjustBorderRadius&&(e.css("border-bottom-left-radius",0),e.css("border-bottom-right-radius",0)),U.onShow()}function j(){var t=O()+U.widthAdjustment;"auto"==U.menuWidth?Z.css({"min-width":t}):"constrain"==U.menuWidth&&Z.css({width:t})}function O(){return e.width()+S(e,"border-left-width")+S(e,"border-right-width")+S(e,"padding-left")+S(e,"padding-right")}function k(n,e){return t.each(n.attr,function(t,n){for(var o=Object.keys(n),i=0;i<o.length;i++)e+=o[i]+'="'+n[o[i]]+'" '}),e}function D(t,n){for(var e=0;e<U.customData.length;e++){var o=t[U.customData[e]];o&&(n+=t[U.customData[e]])}return n}function T(n){var o=U.filterPattern.replace("{INPUT}",e.val()),i='<div class="suggestion-header">'+U.heading+'</div> <ul class="suggestion-box-list">';return t.each(n.suggestions,function(t,n){if(!n.suggestion||!n.url)return!1;Q=!0;var e="";return n.attr&&(e=k(n,e)),i+='<li><a href="'+n.url+'" '+e+">",n.image&&(i+='<img src="'+n.image+'" />'),i+=U.highlightMatch?n.suggestion.replace(new RegExp(o,"gi"),"<b>$&</b>"):n.suggestion,U.customData.length>0&&(i=D(n,i)),i+="</a></li>",t===U.results-1?!1:void 0}),i+="</ul>"}function I(){Z.html('<div class="no-suggestions">'+U.noSuggestionsMessage+"</div>")}function M(t){d(),Q=!1;var n=U.filter?q(e.val()):Y;if(n&&n.suggestions)var o=T(n);G||t?Q&&(e.val().length>0||t)?(Z.html(o),j(),N()):t?(U.showNoSuggestionsMessage&&I(),j(),N()):U.showNoSuggestionsMessage&&e.val().length>0?(j(),N(),I()):x():x()}function J(n){Y=n?n instanceof Object?n:t.parseJSON(n):{},U.sort&&Y.suggestions&&Y.suggestions.sort(U.sort)}function P(n){t.ajax({url:n,dataType:"json",success:function(t){J(t)},error:function(t){console.log(t)}})}function q(n){var e;if(n=n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),filterPattern=U.filterPattern.replace("{INPUT}",n),!n)return Y;if(Y&&Y.suggestions){var o=new RegExp(filterPattern,"i");e=t.grep(Y.suggestions,function(t){return o.test(t.suggestion)})}U.sort&&e&&e.sort(U.sort);var i=JSON.stringify({suggestions:e});return t.parseJSON(i)}var R,B,C,E,U=t.extend({topOffset:0,leftOffset:0,widthAdjustment:0,delay:400,heading:"Suggestions",results:10,fadeIn:!0,fadeOut:!1,menuWidth:"auto",showNoSuggestionsMessage:!1,noSuggestionsMessage:"No Suggestions Found",filter:!0,filterPattern:"({INPUT})",highlightMatch:!1,adjustBorderRadius:!0,ajaxError:function(t){console.log(t)},ajaxSuccess:function(t){},onClick:function(){v(),x(),e.val("")},onShow:function(){},onHide:function(){},paramName:"search",customData:[],scrollable:!1,hybrid:!1},n),A=13,z=38,W=40,$=27,H=-1,L="#",F=!1,K=null,Q=!1,G=!1,V=!1,X={},Y={},Z=null;return function(){E="suggestion-box-"+Math.floor(1e7*Math.random()),t("body").append('<div id="'+E+'" class="suggestion-box"></div>'),C={bottomLeft:e.css("border-bottom-left-radius"),bottomRight:e.css("border-bottom-right-radius")},Z=t("#"+E),B=U.url,e.attr("autocomplete","off"),e.on("blur",i),e.on("keyup",s),e.on("focus",r),e.on("keydown",u),e.on("paste",a),o()}(),Z.on({mousemove:function(t){f(t)&&!V&&(g(H),H=w(t),l(H)),F=!0,V=!1},mouseout:function(n){f(n)&&!V?(g(H),d()):t(":focus").attr("id")!==e.attr("id")&&e.focus(),F=!1},click:function(t){f(t)&&(t.preventDefault(),c(t))}}),t(window).resize(function(){y()}),e.getSuggestions=function(t){return b(t),e},e.addSuggestions=function(t){return J(t),e},e.loadSuggestions=function(t){return P(t),e},e.getJson=function(){return JSON.stringify(Y)},e.moveUp=function(){return m(),e},e.moveDown=function(){return p(),e},e.selectedUrl=function(){return L},e.selectedSuggestion=function(){return Z.find("li:eq("+H+")").text()},e.selectedImage=function(){return Z.find("li:eq("+H+")").find("img").attr("src")},e.position=function(){return H},e.select=function(t){return g(H),H=t,l(t,U.scrollable),e},e.resetSelection=function(){return g(H),d(),e},e.show=function(t){return t=t?t:!1,M(t),e},e.hide=function(){return x(),e},e.getId=function(t){return t?"#"+E:E},e.reservedKey=function(t){var n=t.which;return n===A||n===$||n===z||n===W},e.getDomElement=function(){return t(e).get()[0]},e.destroy=function(){return Z.unbind(),e.off("blur",i),e.off("keyup",s),e.off("focus",r),e.off("keydown",u),e.off("paste",a),Z.remove(),null},e.set=function(t,n){return U[t]=n,o(),e},e.clearSuggestions=function(){return J(JSON.stringify({})),e},e}t.fn.suggestionBox=function(e){var o=t(this).get()[0],i=t.makeArray(arguments),s=t.data(o,"suggestionBox");return s?s.set(i[0],i[1]):(s=new n(e,this),t.data(o,"suggestionBox",s)),s}}(jQuery);
//# sourceMappingURL=maps/suggestion-box.min.js.map
