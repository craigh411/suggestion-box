!function(t){t.fn.suggestionBox=function(n){function e(t){T.onClick(t)}function i(n){return t(n.target).parents("a").length>0||"A"===n.target.nodeName}function r(t,n){B=P.find("li:eq("+t+") a").attr("href"),P.find("li:eq("+t+")").addClass("selected"),n&&u(t)}function o(t){P.find("li:eq("+t+")").removeClass("selected")}function s(){B="#",E=-1,P.find("li").removeClass("selected")}function u(t){if(W=!0,t>-1)var n=P.find("li:eq("+t+")").position().top-P.find("li:eq(0)").position().top;var e=t>-1?n:0;P.scrollTop(e)}function a(t){var n=P.find("li").size();E===n-1?(o(E),s()):(o(E),E++,r(E)),t&&u(E)}function c(t){E>0?(o(E),E--,r(E)):-1==E?(o(E),E=P.find("li").size()-1,r(E)):(o(0),s()),t&&u(E)}function f(){window.location=B}function l(n){J=I.val(),t.ajax({url:n,data:H,dataType:"json",success:function(t){var n=!0,e=E;L.results&&t.results&&(n=JSON.stringify(L.results[E])!==JSON.stringify(t.results[E])),O(t),x(),e>-1&&I.val()===J&&!n&&(E=e,r(E)),T.ajaxSuccess(t)},error:function(t){T.ajaxError(t)}})}function d(n){var e=t(n.target).parents("li");return e.parent().children().index(e)}function h(){var t=g(I,"border-bottom-width")+g(I,"border-top-width"),n=g(I,"padding-bottom")+g(I,"padding-top");P.css({position:"absolute",left:I.offset().left+T.leftOffset,top:I.offset().top+(I.height()+t+n+T.topOffset)})}function g(t,n){return parseInt(t.css(n).replace("px",""))}function p(){P.scrollTop(0),T.fadeOut?P.fadeOut():P.css("display","none"),s(),T.adjustBorderRadius&&(I.css("border-bottom-left-radius",$.bottomLeft),I.css("border-bottom-right-radius",$.bottomRight)),T.onHide()}function v(){T.fadeIn?P.fadeIn():P.css("display","block"),T.adjustBorderRadius&&(I.css("border-bottom-left-radius",0),I.css("border-bottom-right-radius",0)),T.onShow()}function m(){var t=b()+T.widthAdjustment;"auto"==T.menuWidth?P.css({"min-width":t}):"constrain"==T.menuWidth&&P.css({width:t})}function b(){return I.width()+g(I,"border-left-width")+g(I,"border-right-width")+g(I,"padding-left")+g(I,"padding-right")}function w(n,e){return t.each(n.attr,function(t,n){for(var i=Object.keys(n),r=0;r<i.length;r++)e+=i[r]+'="'+n[i[r]]+'" '}),e}function S(t,n){for(var e=0;e<T.customValues.length;e++){var i=t[T.customValues[e]];i&&(n+=t[T.customValues[e]])}return n}function y(n){var e='<div class="suggestion-header">'+T.heading+'</div> <ul class="suggestion-box-list">';return t.each(n.results,function(t,n){if(!n.suggestion||!n.url)return!1;z=!0;var i="";return n.attr&&(i=w(n,i)),e+='<li><a href="'+n.url+'" '+i+">"+n.suggestion,e=S(n,e),e+="</a></li>",t===T.results-1?!1:void 0}),e+="</ul>"}function j(){P.html('<div class="no-suggestions">'+T.noSuggestionsMessage+"</div>")}function x(t){s(),z=!1;var n=T.filter?k(I.val()):L;if(n&&n.results)var e=y(n);A||t?z?(P.html(e),m(),v()):t?(T.showNoSuggestionsMessage&&j(),m(),v()):T.showNoSuggestionsMessage&&I.val().length>0?(m(),v(),j()):p():p()}function O(n){L=n?n instanceof Object?n:t.parseJSON(n):{},T.sort&&L.results&&L.results.sort(T.sort)}function N(n){t.ajax({url:n,dataType:"json",success:function(t){O(t)},error:function(t){console.log(t)}})}function k(n){var e;if(n=n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),filterPattern=T.filterPattern.replace("{INPUT}",n),!n)return{};if(L&&L.results){var i=new RegExp(filterPattern,"i");e=t.grep(L.results,function(t){return i.test(t.suggestion)})}T.sort&&e.sort(T.sort);var r=JSON.stringify({results:e});return t.parseJSON(r)}var I=this,T=t.extend({topOffset:0,leftOffset:0,widthAdjustment:0,delay:400,heading:"Suggestions",results:10,fadeIn:!0,fadeOut:!1,menuWidth:"auto",showNoSuggestionsMessage:!1,noSuggestionsMessage:"No Suggestions Found",filter:!1,filterPattern:"({INPUT})",adjustBorderRadius:!0,ajaxError:function(t){console.log(t)},ajaxSuccess:function(t){},onClick:function(t){f(),p(),I.val("")},onShow:function(){},onHide:function(){},paramName:"search",customValues:[],scrollable:!1},n),P=null,C=null;!function(){C="suggestion-box-"+Math.floor(1e7*Math.random()),t("body").append('<div id="'+C+'" class="suggestion-box"></div>'),P=t("#"+C),h(),T.height&&P.css("max-height",T.height),T.scrollable&&P.css("overflow","auto"),I.attr("autocomplete","off")}();var J,M=13,q=38,D=40,R=27,E=-1,B="#",U=!1,V=null,z=!1,A=!1,W=!1,H={},L={},$={bottomLeft:I.css("border-bottom-left-radius"),bottomRight:I.css("border-bottom-right-radius")};return P.on({mousemove:function(t){i(t)&&!W&&(o(E),E=d(t),r(E)),U=!0,W=!1},mouseout:function(n){i(n)&&!W?(o(E),s()):t(":focus").attr("id")!==I.attr("id")&&I.focus(),U=!1},click:function(t){i(t)&&(t.preventDefault(),e(t))}}),I.on({blur:function(){A=!1,U||p()},focus:function(){A=!0,t(this).val()&&x(L)},keyup:function(t){t.which!==q&&t.which!==D&&t.which!==R&&t.which!==M&&(T.url&&(s(),V&&clearTimeout(V),H[T.paramName]=I.val(),V=setTimeout(function(){l(T.url)},T.delay)),T.filter&&x())},keydown:function(t){"none"!==P.css("display")&&(t.which==D&&(t.preventDefault(),a(!0)),t.which==q&&(t.preventDefault(),c(!0)),t.which===M&&E>-1&&(t.preventDefault(),P.find(".selected a").click()),t.which==R&&(t.preventDefault(),p()))},paste:function(){setTimeout(function(){I.keyup()},200)}}),t(window).resize(function(){h()}),{getSuggestions:function(t){return l(t),this},addSuggestions:function(t){return O(t),this},loadSuggestions:function(t){return N(t),this},getJson:function(){return JSON.stringify(L)},moveUp:function(){return c(),this},moveDown:function(){return a(),this},selectedUrl:function(){return B},selectedSuggestion:function(){return P.find("li:eq("+E+")").text()},position:function(){return E},select:function(t){return o(E),E=t,r(t,T.scrollable),this},reset:function(){return o(E),s(),this},show:function(t){return t=t?t:!1,x(t),this},hide:function(){return p(),this},url:function(t){return T.url=t,this},fadeIn:function(t){return T.fadeIn=t,this},fadeOut:function(t){return T.fadeOut=t,this},delay:function(t){return T.delay=t,this},heading:function(t){return T.heading=t,this},results:function(t){return T.results=t,this},ajaxError:function(t){return T.ajaxError=t,this},ajaxSuccess:function(t){return T.ajaxSuccess=t,this},filter:function(t){return T.filter=t,this},filterPattern:function(t){return T.filterPattern=t,this},sort:function(t){return T.sort=t,this},onClick:function(t){return T.onClick=t,this},getId:function(t){return t?"#"+C:C},reservedKey:function(t){var n=t.which;return n===M||n===R||n===q||n===D},destroy:function(){return I.unbind(this),P.remove(),null}}}}(jQuery);
//# sourceMappingURL=maps/suggestion-box.min.js.map
