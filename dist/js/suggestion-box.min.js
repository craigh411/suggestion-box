!function(t){t.fn.suggestionBox=function(n){function e(t){T=j.find("li:eq("+t+") a").attr("href"),j.find("li:eq("+t+")").addClass("selected")}function i(t){j.find("li:eq("+t+")").removeClass("selected")}function r(){T="#",P=-1}function u(){var t=j.find("li").size();P===t-1?(i(P),r()):(i(P),P++,e(P))}function o(){P>0?(i(P),P--,e(P)):-1==P?(i(P),P=j.find("li").size()-1,e(P)):(i(0),r())}function s(){window.location=T}function a(n){t.ajax({url:n,data:q,dataType:"json",success:function(t){m(t),v(),y.ajaxSuccess(t)},error:function(t){y.ajaxError(t)}})}function f(n){var e=t(n.target).parent("li");return e.parent().children().index(e)}function c(){var t=d(S,"border-bottom-width")+d(S,"border-top-width"),n=d(S,"padding-bottom")+d(S,"padding-top");j.css({position:"absolute",left:S.offset().left+y.leftOffset,top:S.offset().top+(S.height()+t+n+y.topOffset)})}function d(t,n){return parseInt(t.css(n).replace("px",""))}function l(){y.fadeOut?j.fadeOut():j.css("display","none"),r()}function h(){y.fadeIn?j.fadeIn():j.css("display","block")}function g(){var t=p()+y.widthAdjustment;"auto"==y.menuWidth?j.css({"min-width":t}):"constrain"==y.menuWidth&&j.css({width:t})}function p(){return S.width()+d(S,"border-left-width")+d(S,"border-right-width")+d(S,"padding-left")+d(S,"padding-right")}function v(){r(),J=!1;var n=y.filter?x(S.val()):A;if(n&&n.results){var e='<div id="suggestion-header">'+y.heading+'</div> <ul id="suggestion-box-list">';t.each(n.results,function(n,i){if(!i.suggestion||!i.url)return!1;J=!0;var r="";return i.attr&&t.each(i.attr,function(t,n){r+=n.name+'="'+n.value+'" '}),e+='<li><a href="'+i.url+'" '+r+">"+i.suggestion+"</a></li>",n===y.results-1?!1:void 0}),e+="</ul>"}k?J?(j.html(e),g(),h()):y.showNoSuggestionsMessage&&S.val().length>0?(g(),h(),j.html('<div id="no-suggestions">'+y.noSuggestionsMessage+"</div>")):l():l()}function m(n){A=n?n instanceof Object?n:t.parseJSON(n):{}}function w(n){t.ajax({url:n,dataType:"json",success:function(t){m(t)},error:function(t){console.log(t)}})}function x(n){var e;if(filterPattern=y.filterPattern.replace("{INPUT}",n),!n)return{};if(A&&A.results){var i=new RegExp(filterPattern,"i");e=t.grep(A.results,function(t){return i.test(t.suggestion)})}y.sort&&e.sort(y.sort);var r=JSON.stringify({results:e});return t.parseJSON(r)}var S=this,y=t.extend({topOffset:0,leftOffset:0,widthAdjustment:0,delay:400,heading:"Suggestions",results:10,fadeIn:!0,fadeOut:!1,menuWidth:"auto",showNoSuggestionsMessage:!1,noSuggestionsMessage:"No Suggestions Found",filter:!1,filterPattern:"({INPUT})",ajaxError:function(t){console.log(t)},ajaxSuccess:function(t){},paramName:"search"},n);t("body").append('<div id="suggestion-box"></div>'),S.attr("autocomplete","off");var j=t("#suggestion-box");c();var b=13,O=38,N=40,I=27,P=-1,T="#",D=!1,E=null,J=!1,k=!1,q={},A={};return j.on({mousemove:function(t){"A"===t.target.nodeName&&(i(P),P=f(t),e(P),D=!0)},mouseout:function(t){"A"===t.target.nodeName&&(D=!1,i(P),r())}}),S.on({blur:function(){k=!1,D||l()},focus:function(){k=!0,t(this).val()&&v(A)},keyup:function(t){t.which!==O&&t.which!==N&&t.which!==I&&(y.url?(E&&clearTimeout(E),q[y.paramName]=S.val(),E=setTimeout(function(){a(y.url)},y.delay)):y.filter&&v())},keydown:function(t){"none"!==j.css("display")&&(t.which==N&&(t.preventDefault(),u()),t.which==O&&(t.preventDefault(),o()),t.which===b&&"#"!==T&&(t.preventDefault(),s()),t.which==I&&(t.preventDefault(),l()))},paste:function(){setTimeout(function(){S.keyup()},200)}}),t(window).resize(function(){c()}),{getSuggestions:function(t){return a(t),this},addSuggestions:function(t){return m(t),this},loadSuggestions:function(t){return w(t),this},getJson:function(){return JSON.stringify(A)},moveUp:function(){return o(),this},moveDown:function(){return u(),this},selectedUrl:function(){return T},selectedSuggestion:function(){return j.find("li:eq("+P+")").text()},position:function(){return P},select:function(t){return i(P),P=t,e(t),this},reset:function(){return i(P),r(),this},show:function(){return S.focus(),v(),this},hide:function(){return l(),this},url:function(t){return y.url=t,this},fadeIn:function(t){return y.fadeIn=t,this},fadeOut:function(t){return y.fadeOut=t,this},delay:function(t){return y.delay=t,this},heading:function(t){return y.heading=t,this},results:function(t){return y.results=t,this},ajaxError:function(t){return y.ajaxError=t,this},ajaxSuccess:function(t){return y.ajaxSuccess=t,this},filter:function(t){return y.filter=t,this},filterPattern:function(t){return y.filterPattern=t,this},sort:function(t){return y.sort=t,this},destroy:function(){return S.unbind(this),j.remove(),null}}}}(jQuery);
//# sourceMappingURL=maps/suggestion-box.min.js.map
